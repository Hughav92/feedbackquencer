#N canvas 89 310 683 627 12;
#X obj 543 267 loadbang;
#X obj 601 299 s lb;
#X msg 543 300 in 26;
#X obj 543 324 s bela_setDigital;
#N canvas 1042 89 759 331 input 0;
#X obj 24 60 adc~ 3;
#X obj 320 58 adc~ 4;
#X obj 600 63 r bela_digitalIn26;
#X obj 600 253 outlet;
#X obj 320 137 *~ 0.5;
#X obj 319 261 outlet~;
#X obj 24 261 outlet~;
#X text 24 26 microphone input;
#X text 296 31 photoresistor input;
#X text 595 34 button input;
#X text 377 136 Normalise;
#X text 341 174 Based on some quick tests;
#X text 342 189 Found that in general 0.5;
#X text 343 205 Was the maximum reached;
#X obj 24 153 lop~ 2000;
#X obj 25 127 hip~ 100;
#X text 99 140 filtering;
#X connect 0 0 15 0;
#X connect 1 0 4 0;
#X connect 2 0 3 0;
#X connect 4 0 5 0;
#X connect 14 0 6 0;
#X connect 15 0 14 0;
#X restore 20 16 pd input;
#X obj 26 570 dac~ 1 2 3;
#N canvas 891 304 816 475 mapping 0;
#X obj 367 135 *~;
#X obj 367 344 *~ 10;
#X obj 365 43 inlet~;
#X obj 432 42 inlet~;
#X obj 9 54 inlet;
#X obj 367 404 outlet~;
#X obj 10 395 outlet~;
#N canvas 831 567 714 375 button_controller 0;
#X obj 60 27 inlet;
#X obj 60 71 sel 1;
#X obj 388 27 inlet;
#X obj 60 113 i;
#X obj 95 112 + 1;
#X obj 93 235 f;
#X obj 133 235 f;
#X obj 178 236 f;
#X obj 223 236 f;
#X obj 140 312 outlet;
#X text 99 144 Cycles through to select;
#X text 308 5 Gets Hz for sawtooth based upon length of sequencer note
duration;
#X obj 388 51 / 1000;
#X obj 411 107 * 2;
#X obj 388 134 /;
#X obj 388 79 t b f;
#X msg 373 107 1;
#X obj 468 133 /;
#X obj 468 78 t b f;
#X msg 453 106 1;
#X obj 532 134 /;
#X obj 532 79 t b f;
#X msg 517 107 1;
#X obj 555 107 * 0.2;
#X obj 626 134 /;
#X obj 626 79 t b f;
#X msg 611 107 1;
#X obj 649 107 * 0.1;
#X obj 12 208 r lb;
#X obj 60 145 % 5;
#X obj 60 183 sel 0 1 2 3 4;
#X obj 56 234 f 0;
#X obj 57 309 outlet;
#X connect 0 0 1 0;
#X connect 1 0 3 0;
#X connect 2 0 12 0;
#X connect 3 0 4 0;
#X connect 3 0 29 0;
#X connect 4 0 3 1;
#X connect 5 0 9 0;
#X connect 6 0 9 0;
#X connect 7 0 9 0;
#X connect 8 0 9 0;
#X connect 12 0 15 0;
#X connect 12 0 18 0;
#X connect 12 0 21 0;
#X connect 12 0 25 0;
#X connect 13 0 14 1;
#X connect 14 0 5 1;
#X connect 15 0 16 0;
#X connect 15 1 13 0;
#X connect 16 0 14 0;
#X connect 17 0 6 1;
#X connect 18 0 19 0;
#X connect 18 1 17 1;
#X connect 19 0 17 0;
#X connect 20 0 7 1;
#X connect 21 0 22 0;
#X connect 21 1 23 0;
#X connect 22 0 20 0;
#X connect 23 0 20 1;
#X connect 24 0 8 1;
#X connect 25 0 26 0;
#X connect 25 1 27 0;
#X connect 26 0 24 0;
#X connect 27 0 24 1;
#X connect 28 0 31 0;
#X connect 29 0 30 0;
#X connect 30 0 31 0;
#X connect 30 1 5 0;
#X connect 30 2 6 0;
#X connect 30 3 7 0;
#X connect 30 4 8 0;
#X connect 31 0 32 0;
#X restore 9 173 pd button_controller;
#X obj 146 57 inlet;
#X text 295 16 Microphone Input;
#X text 431 16 Photoresistor Input;
#X text 411 134 Multiply audio sample with photoresistor sample;
#X text 413 161 Acts as an amplitude envelope;
#X text 72 336 Sawtooth to control LED;
#X text 167 174 Button mapping;
#X text 5 19 Button Input;
#X text 102 18 Sequencer Note Duration;
#X obj 11 335 phasor~;
#X obj 105 289 spigot;
#X obj 131 259 tgl 15 0 empty empty empty 17 7 0 10 #fcfcfc #000000
#000000 0 1;
#X obj 9 206 t f f;
#X obj 12 363 *~;
#X obj 106 207 t f f f;
#X msg 163 237 1;
#X text 421 345 Increase amplitude as resultant signal was very quiet
;
#X text 73 354 can also use other signal for;
#X text 74 370 different amplitude envelopes;
#X connect 0 0 1 0;
#X connect 1 0 5 0;
#X connect 2 0 0 0;
#X connect 3 0 0 1;
#X connect 4 0 7 0;
#X connect 7 0 20 0;
#X connect 7 1 22 0;
#X connect 8 0 7 1;
#X connect 17 0 21 0;
#X connect 18 0 17 0;
#X connect 19 0 18 1;
#X connect 20 0 21 1;
#X connect 20 1 19 0;
#X connect 21 0 6 0;
#X connect 22 0 18 0;
#X connect 22 1 19 0;
#X connect 22 2 23 0;
#X connect 23 0 21 1;
#X restore 146 138 pd mapping;
#N canvas 814 328 796 366 generation 0;
#X obj 49 228 pitchshifter~;
#X obj 210 228 pitchshifter~;
#N canvas 427 224 1002 486 sequencer 0;
#X obj 851 132 metro 1000;
#X obj 851 162 i;
#X obj 886 161 + 1;
#X obj 858 67 tgl 15 0 empty empty empty 17 7 0 10 #fcfcfc #000000
#000000 0 1;
#X obj 851 194 % 4;
#X msg 815 130 0;
#X obj 858 33 r lb;
#X obj 851 232 sel 0 1 2 3;
#X obj 2 398 outlet;
#X obj 232 400 outlet;
#X obj 504 404 outlet;
#X obj 760 402 outlet;
#X obj 28 11 inlet;
#X obj 86 10 inlet;
#X obj 148 11 inlet;
#X obj 208 12 inlet;
#X obj 266 13 inlet;
#X msg 2 357 transpose \$1 \, window 10 \, delay 0;
#X msg 261 354 transpose \$1 \, window 10 \, delay 0;
#X msg 504 357 transpose \$1 \, window 10 \, delay 0;
#X msg 760 360 transpose \$1 \, window 10 \, delay 0;
#X obj 2 325 i;
#X obj 261 322 i;
#X obj 504 325 i;
#X obj 760 326 i;
#X obj 856 93 t b f;
#X connect 0 0 1 0;
#X connect 1 0 2 0;
#X connect 1 0 4 0;
#X connect 2 0 1 1;
#X connect 3 0 25 0;
#X connect 4 0 7 0;
#X connect 5 0 1 0;
#X connect 6 0 3 0;
#X connect 7 0 21 0;
#X connect 7 1 22 0;
#X connect 7 2 23 0;
#X connect 7 3 24 0;
#X connect 12 0 0 1;
#X connect 13 0 21 1;
#X connect 14 0 22 1;
#X connect 15 0 23 1;
#X connect 16 0 24 1;
#X connect 17 0 8 0;
#X connect 18 0 9 0;
#X connect 19 0 10 0;
#X connect 20 0 11 0;
#X connect 21 0 17 0;
#X connect 22 0 18 0;
#X connect 23 0 19 0;
#X connect 24 0 20 0;
#X connect 25 0 5 0;
#X connect 25 1 0 0;
#X restore 471 157 pd sequencer;
#X obj 47 44 inlet~;
#X obj 209 47 inlet~;
#X obj 457 51 inlet;
#X obj 504 76 inlet;
#X obj 550 97 inlet;
#X obj 582 123 inlet;
#X obj 412 25 inlet;
#X obj 48 299 outlet~;
#X obj 209 301 outlet~;
#X text 325 222 Pitchshifter object taken from;
#X text 325 241 https://forum.pdpatchrepo.info/topic/665/pitch-shift-for-realtime-audio
;
#X text 325 272 as lacked time to programme own;
#X text 7 10 Microphone Input;
#X text 129 23 With photoresistor amplitude envelope;
#X text 184 6 Microphone Input;
#X text 457 25 Note Duration;
#X text 509 53 Note 1 Pitch Shift;
#X text 550 76 Note 2 Pitch Shift;
#X text 595 96 Note 3 Pitch Shift;
#X text 628 125 Note 4 Pitch Shift;
#X connect 0 0 10 0;
#X connect 1 0 11 0;
#X connect 2 0 1 1;
#X connect 2 0 0 1;
#X connect 2 1 1 1;
#X connect 2 1 0 1;
#X connect 2 2 1 1;
#X connect 2 2 0 1;
#X connect 2 3 1 1;
#X connect 2 3 0 1;
#X connect 3 0 0 0;
#X connect 4 0 1 0;
#X connect 5 0 2 1;
#X connect 6 0 2 2;
#X connect 7 0 2 3;
#X connect 8 0 2 4;
#X connect 9 0 2 0;
#X restore 178 291 pd generation;
#X obj 340 27 r lb;
#X text 535 240 Start up control;
#X text 393 11 Sequencer Parameters;
#X text 392 28 Change these to alter sequence;
#X text 441 71 Note Duration (ms);
#X text 440 95 Note 1 Pitch Shift (semitones);
#X text 439 127 Note 2 Pitch Shift (semitones);
#X text 439 153 Note 3 Pitch Shift (semitones);
#X text 439 185 Note 4 Pitch Shift (semitones);
#X text 90 17 Input Layer;
#X text 228 140 Mapping Layer;
#X text 288 292 Sound Generation layer;
#X text 110 561 1/2 - Audio Output;
#X text 110 579 3 - LCD Output;
#X msg 395 96 0;
#X msg 394 124 5;
#X msg 394 152 7;
#X msg 393 184 9;
#X obj 28 383 +~;
#X obj 26 442 +~;
#X obj 53 513 expr~ tanh($v1);
#X msg 395 72 400;
#X text 30 252 < raw feedback;
#X text 140 330 < pitchshift without photoresistor envelope;
#X text 146 379 < pitchshift with photoresistor envelope;
#X text 288 566 audio output consists of raw feedback mixed with;
#X text 289 584 sequence without amplitude envelope and sequence;
#X text 290 600 with amplitude envelope;
#X text 48 490 < If desired insert here above dac 1/2;
#X text 48 475 This functions as a very naive limiter to control level
;
#X connect 0 0 1 0;
#X connect 0 0 2 0;
#X connect 2 0 3 0;
#X connect 4 0 6 2;
#X connect 4 0 7 0;
#X connect 4 0 26 0;
#X connect 4 1 6 3;
#X connect 4 2 6 0;
#X connect 6 0 5 2;
#X connect 6 1 7 1;
#X connect 7 0 26 1;
#X connect 7 1 27 1;
#X connect 8 0 29 0;
#X connect 8 0 22 0;
#X connect 8 0 23 0;
#X connect 8 0 25 0;
#X connect 8 0 24 0;
#X connect 22 0 7 3;
#X connect 23 0 7 4;
#X connect 24 0 7 5;
#X connect 25 0 7 6;
#X connect 26 0 27 0;
#X connect 27 0 5 0;
#X connect 27 0 5 1;
#X connect 29 0 7 2;
#X connect 29 0 6 1;
